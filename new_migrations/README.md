# üìÅ –ù–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ Supabase

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞ "–î–Ω–µ–≤–Ω–∏–∫ –ø–æ–¥–æ–ø–µ—á–Ω–æ–≥–æ".

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:

- `00_types_and_extensions.sql` - –¢–∏–ø—ã, ENUM –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è PostgreSQL (–ü–†–ò–ú–ï–ù–ò–¢–¨ –ü–ï–†–í–´–ú!)
- `01_tables_structure.sql` - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü (CREATE TABLE)
- `01_foreign_keys.sql` - –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ (Foreign Keys)
- `02_indexes.sql` - –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã
- `03_functions.sql` - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `04_rls_policies.sql` - –í—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ RLS
- `05_triggers.sql` - –í—Å–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
- `full_migration.sql` - –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ –∫–æ–Ω—Ü–µ)

## ‚úÖ –°—Ç–∞—Ç—É—Å:

- [x] 00_types_and_extensions.sql - –ì–æ—Ç–æ–≤–æ (8 ENUM —Ç–∏–ø–æ–≤, 3 —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è) ‚úÖ –ü–†–û–í–ï–†–ï–ù–û
- [x] 01_tables_structure.sql - –ì–æ—Ç–æ–≤–æ (27 —Ç–∞–±–ª–∏—Ü) ‚úÖ –ü–†–û–í–ï–†–ï–ù–û (PRIMARY KEY –≤–∫–ª—é—á–µ–Ω—ã)
- [x] 01_foreign_keys.sql - –ì–æ—Ç–æ–≤–æ (50 –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π) ‚úÖ –ü–†–û–í–ï–†–ï–ù–û
- [x] 01_unique_constraints.sql - –ì–æ—Ç–æ–≤–æ (7 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π) ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
- [x] 01_check_constraints.sql - –ì–æ—Ç–æ–≤–æ (7 CHECK –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π) ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
- [x] 02_indexes.sql - –ì–æ—Ç–æ–≤–æ (78 –∏–Ω–¥–µ–∫—Å–æ–≤)
- [x] 03_functions.sql - –ì–æ—Ç–æ–≤–æ (43 —Ñ—É–Ω–∫—Ü–∏–∏)
- [x] 04_rls_policies.sql - –ì–æ—Ç–æ–≤–æ (80 –ø–æ–ª–∏—Ç–∏–∫)
- [x] 05_triggers.sql - –ì–æ—Ç–æ–≤–æ (9 —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤)
- [x] 05_auth_triggers.sql - –ì–æ—Ç–æ–≤–æ (1 —Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞ auth.users) ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
- [x] apply_all_migrations.sh - –°–∫—Ä–∏–ø—Ç –¥–ª—è Linux/Mac ‚úÖ –°–û–ó–î–ê–ù
- [x] apply_all_migrations.ps1 - –°–∫—Ä–∏–ø—Ç –¥–ª—è Windows ‚úÖ –°–û–ó–î–ê–ù
- [x] full_migration.sql - –ì–æ—Ç–æ–≤–æ (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π) ‚úÖ –°–û–ó–î–ê–ù

## ‚ö†Ô∏è –í–ê–ñ–ù–û - –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

1. **00_types_and_extensions.sql** - –ü–ï–†–í–´–ú! (—Ç–∏–ø—ã –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
2. **01_tables_structure.sql** - –í—Ç–æ—Ä—ã–º (—Ç–∞–±–ª–∏—Ü—ã)
3. **01_foreign_keys.sql** - –¢—Ä–µ—Ç—å–∏–º (–≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏)
4. **01_unique_constraints.sql** - –ß–µ—Ç–≤–µ—Ä—Ç—ã–º (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
5. **01_check_constraints.sql** - –ü—è—Ç—ã–º (CHECK –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
6. **02_indexes.sql** - –®–µ—Å—Ç—ã–º (–∏–Ω–¥–µ–∫—Å—ã)
7. **03_functions.sql** - –°–µ–¥—å–º—ã–º (—Ñ—É–Ω–∫—Ü–∏–∏)
8. **04_rls_policies.sql** - –í–æ—Å—å–º—ã–º (RLS –ø–æ–ª–∏—Ç–∏–∫–∏)
9. **05_triggers.sql** - –î–µ–≤—è—Ç—ã–º (—Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ö public)
10. **05_auth_triggers.sql** - –î–µ—Å—è—Ç—ã–º (—Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ auth.users)

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π:
- **Linux/Mac:** `./apply_all_migrations.sh [host] [port] [database] [user] [password]`
- **Windows PowerShell:** `.\apply_all_migrations.ps1 -Host "176.124.217.224" -Port 54322 -Database "postgres" -User "postgres" -Password "your_password"`

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ `full_migration.sql` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

