# ✅ Исправленный скрипт установки Supabase

## Изменения в скрипте

### Основное изменение:
- ❌ **Убрана установка Docker:** `curl -fsSL https://get.docker.com | sh`
- ✅ **Добавлена проверка Docker:** Скрипт проверяет наличие Docker и Docker Compose, но не устанавливает их

### Что исправлено:

1. **Проверка Docker (вместо установки):**
   ```bash
   # Проверка Docker (БЕЗ УСТАНОВКИ)
   if ! command -v docker &> /dev/null; then
       echo "❌ Docker не установлен! Установите Docker вручную."
       exit 1
   fi
   ```

2. **Проверка Docker Compose:**
   ```bash
   if ! command -v docker compose &> /dev/null && ! command -v docker-compose &> /dev/null; then
       echo "❌ Docker Compose не установлен! Установите Docker Compose вручную."
       exit 1
   fi
   ```

3. **Улучшена обработка ошибок:**
   - Проверка существования директории перед клонированием
   - Обработка ошибок клонирования GitHub
   - Информативные сообщения об ошибках

4. **Добавлены информативные сообщения:**
   - Прогресс выполнения каждого шага
   - Вывод версий Docker и Docker Compose
   - Предупреждения и ошибки

## Использование

### Вариант 1: Локальный файл
```bash
# Скачать файл
wget https://raw.githubusercontent.com/nazardubnak/HealApp-Web/master/RF_server_SupaBase.sh

# Сделать исполняемым
chmod +x RF_server_SupaBase.sh

# Запустить
./RF_server_SupaBase.sh
```

### Вариант 2: Прямое выполнение
```bash
bash <(curl -s https://raw.githubusercontent.com/nazardubnak/HealApp-Web/master/RF_server_SupaBase.sh)
```

## Важно

⚠️ **Перед запуском убедитесь:**
- Docker установлен и работает
- Docker Compose установлен
- Есть доступ к интернету (для клонирования GitHub)
- Есть права root

## Что делает скрипт

1. ✅ Обновляет систему и устанавливает зависимости
2. ✅ Проверяет наличие Docker (не устанавливает!)
3. ✅ Клонирует репозиторий Supabase
4. ✅ Генерирует .env файл с случайными паролями
5. ✅ Запускает Supabase через Docker Compose
6. ✅ Настраивает Nginx с Basic Auth
7. ✅ Выпускает SSL сертификат
8. ✅ Настраивает фаервол

## Отличия от оригинала

| Оригинал | Исправленная версия |
|----------|---------------------|
| Устанавливает Docker | Проверяет наличие Docker |
| Может сломать существующий Docker | Безопасен для существующего Docker |
| Нет проверки ошибок клонирования | Обработка ошибок клонирования |
| Минимум сообщений | Информативные сообщения о прогрессе |

