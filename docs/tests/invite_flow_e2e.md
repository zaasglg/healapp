# E2E-тест: пригласительная ссылка организации

Сценарий проверяет полный путь:
1. Создание организации.
2. Генерация ссылки для сотрудника через RPC `generate_invite_link`.
3. Регистрация сотрудника через Edge Function `accept-invite`.
4. Проверка, что токен помечен использованным и в БД появились записи.

## Подготовка окружения
Заполните переменные в `.env.local` (или используйте экспорт в консоли):
```
VITE_SUPABASE_URL=...
VITE_SUPABASE_ANON_KEY=...
SUPABASE_SERVICE_ROLE_KEY=...
```

## Запуск
```
npx ts-node scripts/e2e/inviteFlow.ts
```

Скрипт:
- создаёт уникальную организацию и пользователя;
- вызывает RPC `generate_invite_link` от имени организации;
- вызывает `accept-invite` для регистрации сотрудника;
- проверяет таблицы `organization_employees`, `invite_tokens`;
- удаляет тестовые записи (организацию, пользователей, токен).

Успешный сценарий завершится сообщением `E2E сценарий приглашения успешно выполнен.`
Если что-то пойдёт не так, будет выведена ошибка и код завершения 1.
