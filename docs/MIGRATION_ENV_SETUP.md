# Настройка переменных окружения для миграции на российский сервер

## Шаг 1: Создайте файл `.env.local`

Создайте файл `.env.local` в корне проекта со следующим содержимым:

```env
# Supabase Configuration для российского сервера
# URL основного API (REST API) - через nginx на порту 80
VITE_SUPABASE_URL=http://176.124.217.224

# Anon Key для доступа к API
VITE_SUPABASE_ANON_KEY=kSW54FYXXViT8ifRUef7DqfNXYp687ecDjdp8HSggodn1To2638caajJMoA48qze
```

## Шаг 2: Проверьте работу

После создания `.env.local`:

1. Перезапустите dev сервер:
   ```bash
   npm run dev
   ```

2. Проверьте, что приложение подключается к новому серверу

## Важно

- Файл `.env.local` уже должен быть в `.gitignore` и не будет закоммичен
- URL функций автоматически определяется утилитой `src/utils/supabaseConfig.ts`
- **Nginx настроен** для единой точки входа на порту 80
- Все сервисы доступны через стандартный HTTP порт без указания портов

## Структура сервисов на сервере

Через nginx (порт 80):
- **REST API**: `http://176.124.217.224/rest/v1/`
- **Edge Functions**: `http://176.124.217.224/functions/v1/`
- **Auth**: `http://176.124.217.224/auth/v1/`

Прямой доступ (для отладки):
- **REST API**: `http://176.124.217.224:54327/rest/v1/`
- **Edge Functions**: `http://176.124.217.224:54325/functions/v1/`
- **PostgreSQL**: `176.124.217.224:54322`

