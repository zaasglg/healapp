# Доступ к Supabase на российском сервере

## ⚠️ Важно понимать

Self-hosted Supabase **не имеет веб-интерфейса** как облачная версия Supabase. Это API-сервер, который работает через HTTP запросы.

**Вы НЕ увидите красивый веб-интерфейс** при открытии IP адреса в браузере. Вместо этого вы увидите информацию о доступных API эндпоинтах.

## Как получить доступ к Supabase

### 1. Через API эндпоинты (основной способ)

Supabase доступен по следующим путям:

- **REST API**: `http://176.124.217.224/rest/v1/`
  - Откройте в браузере - увидите пустой JSON `{}`
  - Это означает, что API работает!
  
- **Edge Functions**: `http://176.124.217.224/functions/v1/`
  - Например: `http://176.124.217.224/functions/v1/accept-invite`
  
- **Auth**: `http://176.124.217.224/auth/v1/`
  - Для аутентификации пользователей

- **Корневой путь**: `http://176.124.217.224/`
  - Показывает информацию о доступных сервисах

- **Supabase Studio** (веб-интерфейс): `http://176.124.217.224:54324/`
  - Веб-интерфейс для управления базой данных
  - Полнофункциональный интерфейс как в облачной версии Supabase
  - **Доступ напрямую через порт 54324**

### 2. Проверка работы

**В браузере:**
1. Откройте `http://176.124.217.224/` 
   - Увидите текст: "Supabase API доступен: REST API: /rest/v1/, Functions: /functions/v1/, Auth: /auth/v1/, Studio: http://176.124.217.224:54324/"
   - Это нормально! Это не ошибка, а информация о доступных сервисах

2. Откройте `http://176.124.217.224:54324/`
   - Увидите веб-интерфейс Supabase Studio
   - Это полнофункциональный интерфейс для управления БД
   - **Важно:** Studio доступен напрямую через порт 54324, а не через nginx

3. Откройте `http://176.124.217.224/rest/v1/`
   - Должен вернуться пустой JSON `{}`
   - Это означает, что REST API работает правильно!

**Через curl:**
```bash
# REST API
curl http://176.124.217.224/rest/v1/ \
  -H "apikey: kSW54FYXXViT8ifRUef7DqfNXYp687ecDjdp8HSggodn1To2638caajJMoA48qze"

# Functions
curl -X POST http://176.124.217.224/functions/v1/accept-invite \
  -H "Content-Type: application/json" \
  -H "apikey: kSW54FYXXViT8ifRUef7DqfNXYp687ecDjdp8HSggodn1To2638caajJMoA48qze" \
  -d '{}'
```

### 3. Использование в приложении

В файле `.env.local` укажите:
```env
VITE_SUPABASE_URL=http://176.124.217.224
VITE_SUPABASE_ANON_KEY=kSW54FYXXViT8ifRUef7DqfNXYp687ecDjdp8HSggodn1To2638caajJMoA48qze
```

Приложение автоматически будет использовать эти URL для доступа к Supabase.

### 4. Supabase Studio (веб-интерфейс)

✅ **Supabase Studio доступен** по адресу: `http://176.124.217.224:54324/`

Это полнофункциональный веб-интерфейс для управления базой данных, таблицами, RLS политиками, функциями и т.д. - такой же, как в облачной версии Supabase.

**Все функции доступны:**
- ✅ REST API через `/rest/v1/`
- ✅ Edge Functions через `/functions/v1/`
- ✅ Auth через `/auth/v1/`
- ✅ **Supabase Studio через `:54324/`** (веб-интерфейс, напрямую)

### 5. Управление данными

Для управления данными в БД используйте:
- **PostgreSQL клиент** (pgAdmin, DBeaver, psql) - подключение к `176.124.217.224:54322`
- **REST API** - через HTTP запросы
- **Ваше приложение** - через Supabase клиент

Веб-интерфейс не требуется - все операции выполняются через API или напрямую через PostgreSQL.

## Структура URL

```
http://176.124.217.224/
├── /rest/v1/          → REST API (PostgREST)
├── /functions/v1/     → Edge Functions
└── /auth/v1/          → Auth (GoTrue)
```

Все запросы идут через nginx на порту 80, который проксирует их на соответствующие сервисы.

